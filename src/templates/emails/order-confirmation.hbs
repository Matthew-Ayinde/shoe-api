<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Confirmation - {{order.orderNumber}}</title>
    <style>
        /* Reset and base styles */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333333;
            background-color: #f8f9fa;
        }
        
        .email-container {
            max-width: 650px;
            margin: 0 auto;
            background-color: #ffffff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .header {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .header .order-number {
            font-size: 18px;
            opacity: 0.9;
            font-weight: 500;
        }
        
        .content {
            padding: 40px 30px;
        }
        
        .greeting {
            font-size: 18px;
            margin-bottom: 20px;
            color: #2c3e50;
        }
        
        .message {
            font-size: 16px;
            line-height: 1.8;
            margin-bottom: 30px;
            color: #555555;
        }
        
        .order-summary {
            background-color: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
            border: 1px solid #e9ecef;
        }
        
        .order-summary h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 18px;
            display: flex;
            align-items: center;
        }
        
        .order-summary h3::before {
            content: "üìã";
            margin-right: 10px;
        }
        
        .order-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .detail-item {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        
        .detail-label {
            font-size: 12px;
            color: #6c757d;
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-size: 16px;
            color: #2c3e50;
            font-weight: 600;
        }
        
        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            background-color: #28a745;
            color: white;
        }
        
        .items-section {
            margin: 40px 0;
        }
        
        .items-section h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 18px;
            display: flex;
            align-items: center;
        }
        
        .items-section h3::before {
            content: "üëü";
            margin-right: 10px;
        }
        
        .items-table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .items-table th {
            background-color: #f8f9fa;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: #2c3e50;
            border-bottom: 2px solid #e9ecef;
        }
        
        .items-table td {
            padding: 20px 15px;
            border-bottom: 1px solid #e9ecef;
            vertical-align: top;
        }
        
        .items-table tr:last-child td {
            border-bottom: none;
        }
        
        .item-image {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
            margin-right: 15px;
        }
        
        .item-details {
            display: flex;
            align-items: center;
        }
        
        .item-info h4 {
            color: #2c3e50;
            margin-bottom: 5px;
            font-size: 16px;
        }
        
        .item-info p {
            color: #6c757d;
            font-size: 14px;
            margin-bottom: 3px;
        }
        
        .quantity-badge {
            background-color: #e9ecef;
            color: #495057;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .price {
            font-weight: 600;
            color: #28a745;
            font-size: 16px;
        }
        
        .pricing-summary {
            background-color: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
        }
        
        .pricing-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .pricing-row:last-child {
            border-bottom: none;
            padding-top: 15px;
            margin-top: 10px;
            border-top: 2px solid #28a745;
        }
        
        .pricing-row.total {
            font-size: 18px;
            font-weight: 700;
            color: #2c3e50;
        }
        
        .discount {
            color: #28a745;
        }
        
        .address-section {
            background-color: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
        }
        
        .address-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 18px;
            display: flex;
            align-items: center;
        }
        
        .address-section h3::before {
            content: "üè†";
            margin-right: 10px;
        }
        
        .address {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        
        .address p {
            margin-bottom: 5px;
            color: #495057;
        }
        
        .next-steps {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
            text-align: center;
        }
        
        .next-steps h3 {
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .next-steps p {
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .track-button {
            display: inline-block;
            background-color: white;
            color: #667eea;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            transition: transform 0.2s ease;
        }
        
        .track-button:hover {
            transform: translateY(-2px);
        }
        
        .footer {
            background-color: #2c3e50;
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .footer p {
            margin-bottom: 10px;
            opacity: 0.8;
        }
        
        .footer a {
            color: #28a745;
            text-decoration: none;
        }
        
        @media (max-width: 600px) {
            .email-container {
                margin: 0;
                box-shadow: none;
            }
            
            .header, .content, .footer {
                padding: 30px 20px;
            }
            
            .order-details {
                grid-template-columns: 1fr;
            }
            
            .items-table {
                font-size: 14px;
            }
            
            .items-table th,
            .items-table td {
                padding: 10px;
            }
            
            .item-image {
                width: 50px;
                height: 50px;
            }
        }
    </style>
</head>
<body>
    <div class="email-container">
        <!-- Header -->
        <div class="header">
            <h1>Order Confirmed! üéâ</h1>
            <div class="order-number">Order #{{order.orderNumber}}</div>
        </div>
        
        <!-- Main Content -->
        <div class="content">
            <div class="greeting">
                Hi {{user.profile.firstName}},
            </div>
            
            <div class="message">
                <p>Thank you for your order! We've received your purchase and our team is already preparing your items for shipment. You'll receive another email with tracking information once your order is on its way.</p>
            </div>
            
            <!-- Order Summary -->
            <div class="order-summary">
                <h3>Order Summary</h3>
                <div class="order-details">
                    <div class="detail-item">
                        <div class="detail-label">Order Number</div>
                        <div class="detail-value">{{order.orderNumber}}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Order Date</div>
                        <div class="detail-value">{{formatDate order.createdAt 'long'}}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Status</div>
                        <div class="detail-value">
                            <span class="status-badge">{{order.status}}</span>
                        </div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Payment Method</div>
                        <div class="detail-value">{{order.payment.method}}</div>
                    </div>
                </div>
            </div>
            
            <!-- Items Ordered -->
            <div class="items-section">
                <h3>Items Ordered</h3>
                <table class="items-table">
                    <thead>
                        <tr>
                            <th>Item</th>
                            <th style="text-align: center;">Quantity</th>
                            <th style="text-align: right;">Price</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each order.items}}
                        <tr>
                            <td>
                                <div class="item-details">
                                    {{#if productSnapshot.images.[0]}}
                                    <img src="{{productSnapshot.images.[0]}}" alt="{{productSnapshot.name}}" class="item-image">
                                    {{/if}}
                                    <div class="item-info">
                                        <h4>{{productSnapshot.name}}</h4>
                                        <p><strong>Brand:</strong> {{productSnapshot.brand}}</p>
                                        <p><strong>Color:</strong> {{variant.color}} | <strong>Size:</strong> {{variant.size}}</p>
                                        {{#if productSnapshot.sku}}
                                        <p><strong>SKU:</strong> {{productSnapshot.sku}}</p>
                                        {{/if}}
                                    </div>
                                </div>
                            </td>
                            <td style="text-align: center;">
                                <span class="quantity-badge">{{quantity}}</span>
                            </td>
                            <td style="text-align: right;">
                                <div class="price">{{currency totalPrice}}</div>
                            </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
            
            <!-- Pricing Summary -->
            <div class="pricing-summary">
                <div class="pricing-row">
                    <span>Subtotal:</span>
                    <span>{{currency order.pricing.subtotal}}</span>
                </div>
                {{#if order.pricing.discount}}
                <div class="pricing-row discount">
                    <span>Discount:</span>
                    <span>-{{currency order.pricing.discount}}</span>
                </div>
                {{/if}}
                <div class="pricing-row">
                    <span>Shipping:</span>
                    <span>{{currency order.pricing.shipping}}</span>
                </div>
                <div class="pricing-row">
                    <span>Tax:</span>
                    <span>{{currency order.pricing.tax}}</span>
                </div>
                <div class="pricing-row total">
                    <span>Total:</span>
                    <span>{{currency order.pricing.total}}</span>
                </div>
            </div>
            
            <!-- Shipping Address -->
            <div class="address-section">
                <h3>Shipping Address</h3>
                <div class="address">
                    <p><strong>{{order.shippingAddress.firstName}} {{order.shippingAddress.lastName}}</strong></p>
                    <p>{{order.shippingAddress.street}}</p>
                    {{#if order.shippingAddress.apartment}}
                    <p>{{order.shippingAddress.apartment}}</p>
                    {{/if}}
                    <p>{{order.shippingAddress.city}}, {{order.shippingAddress.state}} {{order.shippingAddress.zipCode}}</p>
                    <p>{{order.shippingAddress.country}}</p>
                    {{#if order.shippingAddress.phone}}
                    <p><strong>Phone:</strong> {{order.shippingAddress.phone}}</p>
                    {{/if}}
                </div>
            </div>
            
            <!-- Next Steps -->
            <div class="next-steps">
                <h3>What happens next?</h3>
                <p>We're processing your order and will send you a shipping confirmation email with tracking information within 1-2 business days.</p>
                <a href="{{baseUrl}}/orders/{{order._id}}" class="track-button">
                    Track Your Order
                </a>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <p><strong>{{companyName}}</strong></p>
            <p>Thank you for choosing us for your footwear needs!</p>
            
            <p style="font-size: 12px; margin-top: 20px;">
                Questions about your order? Contact us at <a href="mailto:{{supportEmail}}">{{supportEmail}}</a><br>
                or visit our <a href="{{baseUrl}}/help">Help Center</a>
            </p>
            
            <p style="font-size: 12px; margin-top: 15px;">
                ¬© {{currentYear}} {{companyName}}. All rights reserved.
            </p>
        </div>
    </div>
</body>
</html>
